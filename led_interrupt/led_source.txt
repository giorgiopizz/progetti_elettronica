NAME Uso_del_led
	$include (C8051F020.inc)
	EXTRN CODE (Init_Device);recuperiamo questa funzione da configurazione_micro.asm

	PRINCIPALE SEGMENT CODE


	CSEG AT 0
		JMP START



CSEG AT 0x000B ;dove punta l'interrupt del timer 0
	jmp TIMER


RSEG PRINCIPALE



TIMER:
	DJNZ R0, NULLA
	JMP SCELTA

NULLA:
	RETI
SCELTA:
	;SE R1 è 1 ALLORA ACCENDO, SE è 0 SPENGO
	MOV A, R1
	JZ ACCENSIONE
	JNZ SPEGNIMENTO

ACCENSIONE:
	SETB P1.6
	MOV R0, #1000
	MOV R1,#1
	RETI


SPEGNIMENTO:
	CLR P1.6
	MOV R0, #1000
	MOV R1,#0
	RETI

START: LCALL Init_Device
MOV R0, #1000
MOV R1, #0

jmp $

END
